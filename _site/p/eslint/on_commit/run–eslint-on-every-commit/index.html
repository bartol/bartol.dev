<p>Adding lint staged to your project will be one of the best “low effort high reward” things as it will prevent you to commit if linters aren't happy. Did I mention that you can set it up in few minutes?</p>
<p>As usual, we will start with installing packages. <a href="https://github.com/typicode/husky">husky</a> is used to run <a href="https://githooks.com/">git hooks</a> and <a href="https://www.npmjs.com/package/lint-staged">lint-staged</a> is used to run linters on staged files.</p>
<pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token function">yarn</span> <span class="token function">add</span> -D husky lint-staged</span></code></pre>
<p>While packages are installing we can add following snippet to <code>package.json</code>. <code>husky</code> property should be on same level as <code>scripts</code> or <code>dependencies</code>.</p>
<pre class="language-json"><code class="language-json"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">  ...</span><br><span class="highlight-line">  <span class="token property">"husky"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token property">"hooks"</span><span class="token operator">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      <span class="token property">"pre-commit"</span><span class="token operator">:</span> <span class="token string">"lint-staged"</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line">  ...</span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>Other than that we will add file called <code>lint-staged.config.js</code> in root of the project. This file will configure which linters will be run on which files.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token string">'*.{js,jsx,ts,tsx}'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">    <span class="token comment">// files on which you want to run command</span></span><br><span class="highlight-line">    <span class="token string">'eslint'</span> <span class="token comment">// lint JavaScript and TypeScript</span></span><br><span class="highlight-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token string">'*.{js,jsx,json,yml,yaml,css,less,scss,ts,tsx,md,mdx,graphql}'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">    <span class="token string">'prettier --write'</span><span class="token punctuation">,</span> <span class="token comment">// run prettier and fix errors</span></span><br><span class="highlight-line">    <span class="token string">'git add'</span> <span class="token comment">// add fixed files to next commit</span></span><br><span class="highlight-line">  <span class="token punctuation">]</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>This config will run ESLint on JavaScript and TypeScript files and Prettier on pretty much (pun intended) all lintable (is that a thing?) files. <code>--write</code> flag will automatically fix fixable problems, so we need second <code>git add</code> to add those fixed files.</p>
<p>Easy setup, isn't it? On your next commit you'll see something like this.</p>
<p><img src="./result.png" alt="ESLint running before commit"></p>
