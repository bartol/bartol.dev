<p>As a first <em>real</em> post in which you can learn something, I have chosen Algolia search because this is one of things for which I didn't really find complete tutorial. I would like to write this post with more clarification around little things that took me <em>too long</em> to figure out myself.</p>
<h3>Prerequisites</h3>
<ul>
<li>Just a working Gatsby site that has data you can query with GraphQL</li>
<li><a href="https://www.algolia.com/users/sign_up">Algolia account</a></li>
</ul>
<h3>Goals</h3>
<ul>
<li>Implement front-end and back-end for (hopefully working) search</li>
</ul>
<h3>Basic terminology</h3>
<ul>
<li><strong>Operation</strong> - search query</li>
<li><strong>Hits</strong> - results from search query</li>
<li><strong>Attribute</strong> - searchable parameter (e.g. title)</li>
<li><strong>Record</strong> - one instance with all of the attributes</li>
<li><strong>Indices</strong> - databases in which all records are stored</li>
</ul>
<h2>Setup</h2>
<p>First things first, you should register for <a href="https://www.algolia.com/users/sign_up">Algolia account</a> if you haven't it already.</p>
<p>When you get to your dashboard, navigate to 'Indices' and click big blue button called 'Create Index'. Give it a name and leave it for now.</p>
<p><img src="./create-index.png" alt="Create algolia index"></p>
<p>After that is done, we are going back to terminal to install some dependencies for our project.</p>
<pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token function">yarn</span> <span class="token function">add</span> gatsby-plugin-algolia algoliasearch react-instantsearch-dom dotenv</span></code></pre>
<p>Now that we have successfully increased our already too big JavaScript bundle we can proceed to configure our <a href="https://en.wikipedia.org/wiki/Environment_variable">environment variables</a>. Oh, and it's time to go back to dashboard.</p>
<ul>
<li>Before playing with your environment variables and API keys please, make sure to add .env files to your <a href="https://git-scm.com/docs/gitignore">.gitignore</a> and make sure no one is looking over your shoulder.</li>
</ul>
<p>Okay, okay...can you tell me <strong><em>where to find those environment variables?</em></strong></p>
<p>In tab called 'API keys' you can find your Application ID, Search-Only API Key and Admin API Key. Index name is name that you gave to your Index few minutes ago.</p>
<p><img src="./api-keys.png" alt="Algolia api keys"></p>
<p>Copy them to file called .env.production in root of your project.</p>
<pre class="language-text"><code class="language-text"><span class="highlight-line">ALGOLIA_APP_ID=insertValue</span><br><span class="highlight-line">ALGOLIA_API_KEY=insertValue</span><br><span class="highlight-line">ALGOLIA_SEARCH_KEY=insertValue</span><br><span class="highlight-line">ALGOLIA_INDEX_NAME=insertValue</span></code></pre>
<p>Enough of boring setup. Let's upload some records!</p>
<h2>Back-end</h2>
<p>Now we are going to build 'back-end' of our search. Open your Gatsby config file and add <a href="https://github.com/motdotla/dotenv/blob/master/README.md">dotenv</a> configuration to the top of file so environment variables work.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dotenv'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">  path<span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.env.</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span></code></pre>
<p>Next, you will create GraphQL query that will return all information you need to search. For <a href="https://mdxjs.com/">MDX</a> blog that you are reading right now it looks like this but yours will most likely be very different.</p>
<pre class="language-js"><code class="language-js"><span class="token keyword">const</span> postQuery <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">{<br><span class="highlight-line">  posts: allMdx(</span><br><span class="highlight-line">    filter: { frontmatter: { published: { eq: true } } }</span><br><span class="highlight-line">  ) {</span><br><span class="highlight-line">    edges {</span><br><span class="highlight-line">      node {</span><br><span class="highlight-line">          frontmatter {</span><br><span class="highlight-line">            title</span><br><span class="highlight-line">            slug</span><br><span class="highlight-line">            date(formatString: "MMMM Do, YYYY")</span><br><span class="highlight-line">            datetimestamp</span><br><span class="highlight-line">            tags</span><br><span class="highlight-line">            image {</span><br><span class="highlight-line">              sharp: childImageSharp {</span><br><span class="highlight-line">                fixed(width: 75, height: 75) {</span><br><span class="highlight-line">                  src</span><br><span class="highlight-line">                  srcSetWebp</span><br><span class="highlight-line">                  aspectRatio</span><br><span class="highlight-line">                  base64</span><br><span class="highlight-line">                }</span><br><span class="highlight-line">              }</span><br><span class="highlight-line">              extension</span><br><span class="highlight-line">              publicURL</span><br><span class="highlight-line">            }</span><br><span class="highlight-line">          }</span><br><span class="highlight-line">          timeToRead</span><br><span class="highlight-line">          excerpt(pruneLength: 100000)</span><br><span class="highlight-line">      }</span><br><span class="highlight-line">    }</span><br><span class="highlight-line">  }</span><br>}</span><span class="token template-punctuation string">`</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token comment">// you can add more queries to this array</span></span><br><span class="highlight-line"><span class="token keyword">const</span> queries <span class="token operator">=</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">  <span class="token punctuation">{</span></span><br><span class="highlight-line">    query<span class="token punctuation">:</span> postQuery<span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token function-variable function">transformer</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> data<span class="token punctuation">.</span>posts<span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> node <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> node<span class="token punctuation">)</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    settings<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">]</span></span></code></pre>
<p>This query is filtering so only posts declared as published are returned and everything that is returned here (title, slug, date, tags, post body...) is searchable. There is also image stuff for thumbnail and datetimestamp which is used for sorting (we will look into sorting hits later).</p>
<p>After that all that's left to do for back-end of search is to add gatsby-plugin-algolia to plugins array and pass some options to it.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token operator">...</span></span><br><span class="highlight-line">  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">    <span class="token operator">...</span></span><br><span class="highlight-line">    <span class="token punctuation">{</span></span><br><span class="highlight-line">      resolve<span class="token punctuation">:</span> <span class="token string">'gatsby-plugin-algolia'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      options<span class="token punctuation">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        appId<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ALGOLIA_APP_ID</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        apiKey<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ALGOLIA_API_KEY</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        indexName<span class="token punctuation">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">ALGOLIA_INDEX_NAME</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        queries<span class="token punctuation">,</span></span><br><span class="highlight-line">        chunkSize<span class="token punctuation">:</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token comment">// default: 1000</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token operator">...</span></span><br><span class="highlight-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>And that's it! If you configured everything correctly, after running your build command records will pop up in your Index.</p>
<h2>Front-end</h2>
<p>If your back-end is working and you saw records in dashboard, hard part is done! If you weren't successful in previous part, I've shared links to some useful resources at the bottom.</p>
<p>I'll first show you basic pre-made search box and then we will look into building custom one.</p>
<pre class="language-jsx"><code class="language-jsx"><span class="highlight-line"><span class="token keyword">import</span> algoliasearch <span class="token keyword">from</span> <span class="token string">'algoliasearch/lite'</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> InstantSearch<span class="token punctuation">,</span> SearchBox<span class="token punctuation">,</span> Hits <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-instantsearch-dom'</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> searchClient <span class="token operator">=</span> <span class="token function">algoliasearch</span><span class="token punctuation">(</span><span class="token string">'APP_ID'</span><span class="token punctuation">,</span> <span class="token string">'SEARCH_KEY'</span><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">InstantSearch</span></span> <span class="token attr-name">searchClient</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>searchClient<span class="token punctuation">}</span></span> <span class="token attr-name">indexName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>INDEX_NAME<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br><span class="highlight-line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SearchBox</span></span> <span class="token punctuation">/></span></span><span class="token plain-text"></span><br><span class="highlight-line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hits</span></span> <span class="token punctuation">/></span></span><span class="token plain-text"></span><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">InstantSearch</span></span><span class="token punctuation">></span></span><br><span class="highlight-line"><span class="token punctuation">)</span></span></code></pre>
<ul>
<li>Note: You don't need to use dotenv in component file as APP_ID, SEARCH_KEY and INDEX_NAME can be public.</li>
</ul>
<p>Now let's see how we can build custom search box.</p>
<pre class="language-jsx"><code class="language-jsx"><span class="highlight-line"><span class="token keyword">import</span> algoliasearch <span class="token keyword">from</span> <span class="token string">'algoliasearch/lite'</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> InstantSearch<span class="token punctuation">,</span> Hits<span class="token punctuation">,</span> connectSearchBox <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-instantsearch-dom'</span></span><br><span class="highlight-line"><span class="token keyword">import</span> PostPreview <span class="token keyword">from</span> <span class="token string">'./post-preview'</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> searchClient <span class="token operator">=</span> <span class="token function">algoliasearch</span><span class="token punctuation">(</span><span class="token string">'APP_ID'</span><span class="token punctuation">,</span> <span class="token string">'SEARCH_KEY'</span><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> <span class="token function-variable function">Search</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> currentRefinement<span class="token punctuation">,</span> refine <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><br><span class="highlight-line">    <span class="token attr-name">noValidate</span></span><br><span class="highlight-line">    <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span><span class="token punctuation">'</span></span></span><br><span class="highlight-line">    <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>search<span class="token punctuation">'</span></span></span><br><span class="highlight-line">    <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">event</span> <span class="token operator">=></span> event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span></span><br><span class="highlight-line">  <span class="token punctuation">></span></span><span class="token plain-text"></span><br><span class="highlight-line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span></span><br><span class="highlight-line">      <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>search<span class="token punctuation">'</span></span></span><br><span class="highlight-line">      <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>currentRefinement<span class="token punctuation">}</span></span></span><br><span class="highlight-line">      <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token parameter">event</span> <span class="token operator">=></span> <span class="token function">refine</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span></span><br><span class="highlight-line">      <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>Search<span class="token punctuation">'</span></span></span><br><span class="highlight-line">      <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>Search<span class="token punctuation">'</span></span></span><br><span class="highlight-line">    <span class="token punctuation">/></span></span><span class="token plain-text"></span><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><br><span class="highlight-line"><span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> CustomSearchBox <span class="token operator">=</span> <span class="token function">connectSearchBox</span><span class="token punctuation">(</span>Search<span class="token punctuation">)</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span></span><br>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">InstantSearch</span></span> <span class="token attr-name">searchClient</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>searchClient<span class="token punctuation">}</span></span> <span class="token attr-name">indexName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">'</span>INDEX_NAME<span class="token punctuation">'</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br><span class="highlight-line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CustomSearchBox</span></span> <span class="token punctuation">/></span></span><span class="token plain-text"></span><br><span class="highlight-line">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Hits</span></span> <span class="token attr-name">hitComponent</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>PostPreview<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text"></span><br>  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">InstantSearch</span></span><span class="token punctuation">></span></span><br><span class="highlight-line"><span class="token punctuation">)</span></span></code></pre>
<p>And now you can style or customize your search box. However we are still not done. You'll need to create component post-preview.js in your components folder.</p>
<p>When someone searches on your site Algolia will send hits in JSON and wrap them in component that you pass (in this case post-preview.js).</p>
<p>Here is how it looks like for my blog (simplified, without styles). <a href="https://github.com/bartol/bartol.dev/blob/master/src/components/post-preview.js">Full version</a>.</p>
<pre class="language-jsx"><code class="language-jsx"><span class="highlight-line"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span></span><br><span class="highlight-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'gatsby'</span></span><br><span class="highlight-line"><span class="token keyword">import</span> Image <span class="token keyword">from</span> <span class="token string">'gatsby-image'</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">const</span> <span class="token function-variable function">PostPreview</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> hit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token comment">// make gatsby-image not freak out when you pass svg images for thumbnail</span></span><br><span class="highlight-line">  <span class="token keyword">let</span> img</span><br><span class="highlight-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hit<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>image <span class="token operator">||</span> hit<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>image<span class="token punctuation">.</span>extension <span class="token operator">===</span> <span class="token string">'svg'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    img <span class="token operator">=</span> <span class="token punctuation">(</span></span><br><span class="highlight-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>hit<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>image<span class="token punctuation">.</span>publicURL<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>hit<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    img <span class="token operator">=</span> <span class="token punctuation">(</span></span><br>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Image</span></span><br><span class="highlight-line">        <span class="token attr-name">fixed</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>hit<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>image<span class="token punctuation">.</span>sharp<span class="token punctuation">.</span>fixed<span class="token punctuation">}</span></span></span><br><span class="highlight-line">        <span class="token attr-name">alt</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>hit<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title<span class="token punctuation">}</span></span></span><br>      <span class="token punctuation">/></span></span><br><span class="highlight-line">    <span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text"><br><span class="highlight-line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span><span class="token punctuation">></span></span><span class="token plain-text"></span><br><span class="highlight-line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>hit<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>slug<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>img<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span><br><span class="highlight-line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token plain-text"></span><br><span class="highlight-line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text"></span><br><span class="highlight-line">            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>hit<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>slug<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>hit<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">></span></span><span class="token plain-text"></span><br><span class="highlight-line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span><span class="token plain-text"></span><br><span class="highlight-line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"></span><br><span class="highlight-line">            </span><span class="token punctuation">{</span>hit<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">}</span><span class="token plain-text"> </span><span class="token punctuation">{</span>hit<span class="token punctuation">.</span>timeToRead<span class="token punctuation">}</span><span class="token plain-text"></span><br><span class="highlight-line">          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text"></span><br><span class="highlight-line">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token plain-text"></span><br><span class="highlight-line">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span><span class="token plain-text"></span><br>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span><br><span class="highlight-line">  <span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span><br><span class="highlight-line"></span><br><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">default</span> PostPreview</span></code></pre>
<h2>Configuration</h2>
<h3>Searchable attributes</h3>
<p>List of attributes that will be used for searching. Navigate to your Index, click on tab 'Configuration' and in navigation bar select 'Searchable attributes'. Add all your Searchable attributes and rank them based on importance.</p>
<p><img src="./searchable-attributes.png" alt="how to add searchable attributes"></p>
<h3>Sorting</h3>
<p>For sorting to work you will need to create datetimestamp in your frontmatter. Date timestamp must be in <a href="https://en.wikipedia.org/wiki/Unix_time">unix time</a> format. Here is link to <a href="https://www.unixtimestamp.com/">online date to unix timestamp converter</a>, or if you are using <a href="https://www.alfredapp.com/">Alfred</a> you can install <a href="http://www.packal.org/workflow/timestamp">this</a> awesome workflow.</p>
<p><img src="./sorting.png" alt="Configure Algolia sorting"></p>
<h3>Conclusion</h3>
<p>I hope that progress of building search was fun and easy also that you are proud of what you made. You should be! It's all about small steps.</p>
