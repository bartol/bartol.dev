<p>If you haven't already see, <a href="https://github.com/GoogleChrome/puppeteer">Puppeteer</a> is new thing from Google Chrome team. It's node API for headless chrome. I have already used it for few automation scripts, so I figured out I'll write about it, web page screenshots for today. Let's first install package. This version will include Chromium built in. You can download <code>puppeteer-core</code> and supply your own Chromium executable.</p>
<pre class="language-bash"><code class="language-bash"><span class="highlight-line"><span class="token function">yarn</span> <span class="token function">add</span> puppeteer</span></code></pre>
<p>While modules are downloading we can create blank <code>.js</code> file and import it.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> puppeteer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'puppeteer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<p>This <code>async</code> in some parenthesis may seem weird at the first look if you are new to JavaScript. It's just <em>hack</em> used to write async code at the surface level (not in function). It is wrapped in IIFE which is just a function that is automatically invoked. Inside IIFE we will initialize browser and open page.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> browser <span class="token operator">=</span> <span class="token keyword">await</span> puppeteer<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span><span class="token function">newPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">  <span class="token comment">// other code</span></span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"></span><br><span class="token comment">/* its same thing as this<br><span class="highlight-line"></span><br><span class="highlight-line">async function someFn() {</span><br><span class="highlight-line">  ... code</span><br><span class="highlight-line">}</span><br><span class="highlight-line">someFn()</span></code></pre>
<p>Right now, page is blank. We can navigate to some URL and call screenshot method which will, well, take picture of it.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span><span class="token string">'https://bartol.dev'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><br><span class="highlight-line"><span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">screenshot</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token punctuation">:</span> <span class="token string">'myweb.png'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
<p>And last thing you'll have to do is close browser.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">await</span> browser<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span></code></pre>
