<p>In previous article I've gone over setting up project and environment with Serverless Framework and TypeScript. Today, we will discuss options you can pass to function.</p>
<p>To start, I'll create <code>parseOptions</code> helper function, import it and pass 2 props to it. Both will come from <code>event</code> that aws provides. First will contain, well, parsed query string parameters while other will contain parameters with array of multiple values.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">handler</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">:</span> Event</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token function">parseOptions</span><span class="token punctuation">(</span></span><br><span class="highlight-line">    event<span class="token punctuation">.</span>queryStringParameters<span class="token punctuation">,</span></span><br><span class="highlight-line">    event<span class="token punctuation">.</span>multiValueQueryStringParameters</span><br><span class="highlight-line">  <span class="token punctuation">)</span></span><br><span class="highlight-line">  <span class="token comment">// other code</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>If I dive deep in parse options, you'll quickly realize that it's mostly boring stuff. There are a tone of properties which will just return passed or default value like <code>fontColor</code>.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> fontColor <span class="token operator">=</span> options<span class="token punctuation">.</span>fontColor <span class="token operator">||</span> <span class="token string">'#f7f7f7'</span></span></code></pre>
<p>There is still one property I'd like to show you. It's images property. While not technically impressive, it's more complex than others. Looks quite complicated but all it's doing is adding image URL to array along with height and width (default if not provided).</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token keyword">const</span> images<span class="token punctuation">:</span> Image<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><br><span class="highlight-line"><span class="token keyword">if</span> <span class="token punctuation">(</span>multiValueOptions<span class="token punctuation">.</span>images<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> multiValueOptions<span class="token punctuation">.</span>images<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isUrl</span><span class="token punctuation">(</span>multiValueOptions<span class="token punctuation">.</span>images<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">      images<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">        src<span class="token punctuation">:</span> multiValueOptions<span class="token punctuation">.</span>images<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        width<span class="token punctuation">:</span></span><br><span class="highlight-line">          multiValueOptions<span class="token punctuation">.</span>widths <span class="token operator">&amp;&amp;</span> multiValueOptions<span class="token punctuation">.</span>widths<span class="token punctuation">[</span>i<span class="token punctuation">]</span></span><br><span class="highlight-line">            <span class="token operator">?</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>multiValueOptions<span class="token punctuation">.</span>widths<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></span><br><span class="highlight-line">            <span class="token punctuation">:</span> <span class="token number">250</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        height<span class="token punctuation">:</span></span><br><span class="highlight-line">          multiValueOptions<span class="token punctuation">.</span>heights <span class="token operator">&amp;&amp;</span> multiValueOptions<span class="token punctuation">.</span>heights<span class="token punctuation">[</span>i<span class="token punctuation">]</span></span><br><span class="highlight-line">            <span class="token operator">?</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>multiValueOptions<span class="token punctuation">.</span>heights<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span></span><br><span class="highlight-line">            <span class="token punctuation">:</span> <span class="token number">250</span><span class="token punctuation">,</span></span><br><span class="highlight-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">  images<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><br><span class="highlight-line">    src<span class="token punctuation">:</span> <span class="token string">'https://bartol.dev/images/logo.png'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    width<span class="token punctuation">:</span> <span class="token number">250</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    height<span class="token punctuation">:</span> <span class="token number">250</span><span class="token punctuation">,</span></span><br><span class="highlight-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>Also, if no images are passed, display sample. That is pretty much all I can talk about this part of project. It is indeed boring but you have to go through boring to get to fun stuff.</p>
